<section data-ng-controller="AdminsController" data-ng-init="findSignalements()">
    <div class="page-header">
        <h1>Liste des signalements</h1>
    </div>

    <div class="input-group" ng-hide="avance">
        <input type="text" data-ng-model="signalement" class="form-control" placeholder="Rechercher par une valeur quelconque...">
        <span class="input-group-btn">
            <button class="btn btn-default" ng-click="avance=true">Activer filtrage avancé!</button>
        </span>
    </div>

    <table class="table" ng-show="avance">
        <thead>
        <tr>
            <th>
                <div class="input-group">
                    <label>Créateur du signalement:
                        <input type="text" data-ng-model="signalement.user.displayName" class="form-control" placeholder="Rechercher par nom...">
                    </label>
                </div>
            </th>
            <th>
                <div class="input-group">
                    <label>L'utilisateur signalé:
                        <input type="text" data-ng-model="signalement.user_signale.displayName" class="form-control" placeholder="Rechercher par afectation...">
                    </label>
                </div>
            </th>
            <th>
                <div class="input-group">
                    <label>Le motif:
                        <input type="text" data-ng-model="signalement.motif" class="form-control" placeholder="Rechercher par type...">
                    </label>
                </div>
            </th>
            <th><button class="btn btn-default" ng-click="avance=false">Activer filtrage générale!</button></th>
            <th>&nbsp;</th>
        </tr>
        </thead>
    </table>
    <table class="table">
        <thead>
        <tr>
            <th>L'utilsateur</th>
            <th>a signalé</th>
            <th>Le motif</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="signalement in signalementsList| filter:signalement" >
            <td>{{signalement.user.displayName}}</td>
            <td>{{signalement.user_signale.displayName}}</td>
            <td>{{signalement.motif}}</td>
            <td>
                <button class="btn btn-success"ng-click="acceptSignalement(signalement)">Accepter</button>
            </td>
            <td><button class="btn btn-danger" ng-click="supprimerSignalement(signalement)">Refuser</button></td>
        </tr>
        </tbody>
    </table>
</section>
